
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:TaskNotesApp.ViewModels"
             x:Class="TaskNotesApp.Views.TaskListPage"
             BackgroundColor="#F4F6FA">

    <ContentPage.BindingContext>
        <vm:TaskListViewModel />
    </ContentPage.BindingContext>

 
    <Grid Padding="16"
          RowDefinitions="Auto,*,Auto">

     
        <Label Grid.Row="0"
               Text="ðŸ“ Task Notes"
               FontSize="28"
               FontAttributes="Bold"
               TextColor="#1F2937"
               Margin="0,0,0,10" />

     
        <CollectionView Grid.Row="1"
                ItemsSource="{Binding Tasks}"
                VerticalScrollBarVisibility="Always"
                SelectionMode="None">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="6"
          ColumnDefinitions="40,*,Auto,Auto"
          VerticalOptions="Center"
          ColumnSpacing="10">

                        <CheckBox Grid.Column="0"
          IsChecked="{Binding IsCompleted}"
          Color="Green"
          Scale="1.25"
          VerticalOptions="Center"
          HorizontalOptions="Center" />



                        <!-- READ MODE -->
                        <Label Grid.Column="1"
               Text="{Binding Title}"
                               TextColor="Black"
               FontSize="16"
               FontAttributes="Bold"
               IsVisible="{Binding IsEditing, Converter={StaticResource InverseBoolConverter}}"
               VerticalOptions="Center"/>

                        <Entry x:Name="EditEntry"
       Grid.Column="1"
       Text="{Binding Title, Mode=TwoWay}"
       FontSize="16"
       FontAttributes="Bold"
       BackgroundColor="#E5E7EB"
       TextColor="Black"
       IsVisible="{Binding IsEditing}"
       VerticalOptions="Center"
                           

       PropertyChanged="Entry_PropertyChanged"/>

                        <Button Grid.Column="2"
                Text="Update"
                BackgroundColor="Green"
                TextColor="White"
                                   FontAttributes="Bold"
                WidthRequest="90"
                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}},
                                  Path=BindingContext.SaveCommand}"
                CommandParameter="{Binding .}" />

                        <Button Grid.Column="3"
                Text="Delete"
                BackgroundColor="red"
                                   FontAttributes="Bold"
                TextColor="White"
                WidthRequest="90"
                Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}},
                                  Path=BindingContext.DeleteCommand}"
                CommandParameter="{Binding .}" />
                    </Grid>
                </DataTemplate>

            </CollectionView.ItemTemplate>


        </CollectionView>

       
        <Frame Grid.Row="2"
               Padding="10"
               CornerRadius="16"
               BackgroundColor="White"
               HasShadow="True"
               Margin="0,10,0,0">

            <Grid ColumnDefinitions="*,Auto"
                  ColumnSpacing="10">

                <Entry Grid.Column="0"
                       Placeholder="Enter new task..."
                       Text="{Binding NewTaskTitle}"
                       HeightRequest="48"
                       TextColor="Black"
                       BackgroundColor="#F3F4F6"
                       Margin="0" />

                <Button Grid.Column="1"
                        Text="Add"
                        FontAttributes="Bold"
                        BackgroundColor="#4F46E5"
                        TextColor="White"
                        CornerRadius="12"
                        Command="{Binding AddCommand}" />
            </Grid>

        </Frame>

    </Grid>

</ContentPage>
